# 8章 HTTP/2のセマンティクス：新しいユースケース

@y-kaneda

## 8.1 レスポンシブデザイン
- 以前はユーザーエージェントで判定してモバイル向けコンテンツを配信していた
  - UAは正規化されていないので、正しく判定できないこともあった
  - フィーチャーフォン時代には各キャリアが公開しているIPアドレス範囲に基づいて判定しているサイトもあった
- CSSピクセル
  - ブラウザが実際のスクリーンより一回り小さいと認識して表示する論理解像度
  - ブラウザの論理解像度と物理解像度の比率をピクセルデバイスレシオと呼ぶ
  - デバイスのCSSピクセルを判定して適したレイアウトを提供することができる
  - モバイル向けブラウザはPCサイトであってもスクリーンの拡大縮小比率を決定しようとするが、以下のmetaタグをヘッダーに入れてそれを無効化し、CSSピクセルの判定でのレスポンシブデザインを適用できる
    - `<meta name="viewport" content="width=device-width, initial-scale=1.0">`
- 画像
  - 物理解像度に対して適したサイズの画像を提供しなければジャギーが目立ってしまう
  - 以下のようなimgタグで複数の画像を指定し、ブラウザが適切なファイルを選択するようにできる
    - `<img src="photo.png" srcset="photo@2x.png 2x, photo@3x.png 3x">`

## 8.2 セマンティックウェブ
- ウェブサイトで表面的な「テキスト」、「文書」ではなく、「意味」を扱う
- ウェブの父であるティム・バーナーズ・リーが提唱
- セマンティックウェブではない通常のウェブでは意味を理解するのもリンクをたどって情報を探索するのも人間の仕事
  - 以前のディレクトリ型検索エンジンではサイトの情報は検索エンジンが管理するディレクトリ構造のページにまとめられていた
  - Google によって開発されたページランクアルゴリズムによってキーワードと被リンク数といった指標でインデックスされ、意味によらない仕組みになった
  - 現在もアルゴリズムは変わっているが統計的に自動化されている点は変わらない
- セマンティックウェブは人の手を介さずにデータを正規化してプログラムから扱えるようにしたもので、本来の目的はインターネット全体を意味でつなげて巨大なナレッジベースにするというものだった。
- まだ本来の目的は達成できていないが、検索エンジン用のメタ情報提供のソリューションとして使われている

### 8.2.1 RDF(Resource Description Framework)
- XMLなどを使って意味を記述しようとした汎用的なアプローチの中で提案された記述フォーマット
- URIで識別されるエンティティ間の関係性を記述する
- トリプルと呼ばれる「主語」「述語」「目的語」という関係性で要素をリンクする

### 8.2.2 ダブリンコア
- メタデータ記述のボキャブラリー集 ([RFC5013](https://tools.ietf.org/html/rfc5013.html))
- たいていのリソースは誰かの著作物であることが多く、その著作物特有の特性を定義している

### 8.2.3 RSS(RDF Site Summary)
- ウェブサイトの更新履歴のサマリーに関するボキャブラリー
- ブログやウェブサイトを更新するとブログエンジンやコンテンツ管理システムが自動的にRSSファイルに新しい順に新規コンテンツのサマリーを格納する
- RSSリーダーはこのRSSファイルを確認して未読管理や通知等を行う

### 8.2.4 マイクロフォーマット
- 詳細は全て microformats.org に集約されている
- RDFと違いHTMLタグとクラスを使い表現する
- ウェブサイト間で共通のボキャブラリーをカタログ化して情報の流通を活発にしようとした
- HTMLに埋め込めるためRDFよりポータビリティが高いが、CSSのクラス名の衝突やレイアウトの考慮が必要になる

### 8.2.5 マイクロデータ
- HTMLに埋め込み可能な表現形式
- マイクロフォーマットと異なり、HTMLの属性と衝突しないようにオリジナルの属性を使っている
  - itemscope
  - itemtype
  - itemprop
- ボキャブラリー集の管理は Data-Vocabulary.org から schema.org に移管され、RDFa, JSON-LD と統一のボキャブラリー集に集約されている
- 純粋なマイクロデータのボキャブラリーはマイクロフォーマットよりかなり少ないようだが、ほぼ全て検索エンジンで利用されている

### 8.2.6 RDFの逆襲
- RDF そのものは広く使われなかったが、派生フォーマットが生み出されている
  - RDF/XML
    - XMLで記述
  - Turtle
    - プレーンテキストに近い形式
  - JSON-LD
    - 今後一番使われることになると見込まれている、Google推奨のフォーマット
    - scriptタグを使ってHTML中に記述し、コンテンツに影響を与えない
    - 検索結果に内容が表示される
  - RDFa
    - HTMLとして人間もブラウザも読める

### 8.2.7 RDF系以外のデータ

#### 8.2.7.1 vCard
- 連絡先の交換フォーマット
- MIMEタイプは text/vcard
- .vcf 拡張子のファイルとしても使う

#### 8.2.7.2 iCalendar
- スケジュールやカレンダー、TODOの交換用フォーマット
- MIMEタイプは text/calendar
- .ics 拡張子のファイルとしても使う

## 8.3 オープングラフプロトコル
- 検索エンジンではなく、主にソーシャルネットワークで使われるメタデータ
- オープングラフプロトコルが設定されているウェブサイトのURLをSNS等に貼り付けると記事の一部が引用され、画像も表示される
