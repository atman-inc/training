# gRPC

学習者：m.sasaki

### gRPC
- gRPCとは
  - Googleが作ったRPC
  - HTTP/2上で動作
  - Protocol Buffersを使用してデータをシリアライズ化
  - protoファイルと呼ばれるIDL（Interface Definition Language）でAPI仕様を規定

- RPCとは
  - RPC (Remote Procedure Call)
  - リモートにある関数/手続きを呼ぶことができる

<br>

- RPCの課題
  - 性能
    - ネットワーク越しに関数を呼ぶため時間がかかる
  - データ型変換
    - 言語ごとにサポートする方が異なり変換不可
  - 負荷分散の問題
    - 大規模な分散システムには利用ができなかった

---

### シリアライズ化とProtocolBuffers
- シリアライズ化
  - オブジェクトをバイナリデータに変換する処理
  - 本来該当のアプリだけでしか使用できないオブジェクトを他のシステムに渡せる
  - シリアライズ化されたデータをもとに戻す　＝　デシリアライズ化
  - データ量も削減できる
- gRPCでのシリアライズ化
  - IDLとしてProtocolBuffersを使ってシリアライズ化

- 用語
  - IDL
    - RPCの関数やその引数を定義する言語

---

### protoファイル
- protoファイル
  - サーバーで公開する関数の仕様を規定するファイル
  - protoファイルを使用してクライアント・サーバがgRPCを行うためのコード生成を行う
  - 1種類のprotoファイルから様々な言語のコードを生成可能
  - protoファイルを作るだけで「多言語なアプリ間でのRPC通信」を可能にする

---

### 調べてみて疑問に思ったこと
- APIと似たようなことをしているように感じた
  - 多言語対応している分RPCはAPIの上位互換のように感じられた
  - そのため、以下で2つの違いを調査しまとめる

**結論**

_RPCもAPIの一種_

**RPCとRESTの違い**

- RPCのメリット
  - 複数言語に渡るプログラム間で条件分岐する場合でも直接メソッドで操作可能
  - 仕様によってはGET、POSTを気にする必要もなくシンプル
  - メソッドが直接エンドポイントに作用するので機能追加が容易
  - ペイロードが軽量でパフォーマンスが良い

- RESTのメリット
  - フロントエンドの技術をそのまま使える
  - HTTPプロトコルによって一貫性かつ互換性のある操作が可能
  - URL検索することでURLの機能とそのレスポンス情報が把握しやすい
  - サーバーとフロントで渡すデータ、渡されるデータのみ共有できていればよく、それぞれの開発に集中できる

- URLの違い
  - RPCは動詞の記載
  - RESTは名詞の記載